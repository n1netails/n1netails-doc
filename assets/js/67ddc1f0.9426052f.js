"use strict";(self.webpackChunkn1netails_doc=self.webpackChunkn1netails_doc||[]).push([[3128],{3656:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"n1netails/n1netails-docker-quickstart","title":"N1netails Docker Quickstart","description":"Follow this guide to set up the N1netails project.","source":"@site/docs/n1netails/n1netails-docker-quickstart.md","sourceDirName":"n1netails","slug":"/n1netails/n1netails-docker-quickstart","permalink":"/docs/n1netails/n1netails-docker-quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/n1netails/n1netails-doc/tree/main/docs/n1netails/n1netails-docker-quickstart.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"N1netails Docker Quickstart","description":"Follow this guide to set up the N1netails project."},"sidebar":"tutorialSidebar","previous":{"title":"N1netails Info","permalink":"/docs/n1netails/n1netails-info"},"next":{"title":"Post Tail Alert to N1netails","permalink":"/docs/n1netails/n1netails-post-tail-alert"}}');var r=t(4848),o=t(8453);const i={sidebar_position:2,title:"N1netails Docker Quickstart",description:"Follow this guide to set up the N1netails project."},l="N1netails Docker Quickstart",a={},c=[{value:"Install Docker Desktop",id:"install-docker-desktop",level:3},{value:"Setup Docker Compose for N1netails",id:"setup-docker-compose-for-n1netails",level:3},{value:"Useful Docker Commands",id:"useful-docker-commands",level:3},{value:"docker compose",id:"docker-compose",level:4},{value:"Remove docker containers",id:"remove-docker-containers",level:4}];function d(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"n1netails-docker-quickstart",children:"N1netails Docker Quickstart"})}),"\n",(0,r.jsx)(n.p,{children:"Run N1netails with docker."}),"\n",(0,r.jsxs)(n.p,{children:["You can set up the N1netails docker images using the docker compose yaml. If you would like to learn more about customizing N1netails for your own set up start at the readme here. ",(0,r.jsx)(n.a,{href:"https://github.com/n1netails/n1netails",children:"N1netails Project Github"})]}),"\n",(0,r.jsx)(n.h3,{id:"install-docker-desktop",children:"Install Docker Desktop"}),"\n",(0,r.jsxs)(n.p,{children:["Install Docker Desktop on your local computer or server ",(0,r.jsx)(n.a,{href:"https://www.docker.com/get-started/",children:"Docker get started"})]}),"\n",(0,r.jsx)(n.h3,{id:"setup-docker-compose-for-n1netails",children:"Setup Docker Compose for N1netails"}),"\n",(0,r.jsxs)(n.p,{children:["After you have docker desktop or docker compose set up on your server you can use the following ",(0,r.jsx)(n.code,{children:"docker-compose.yml"})," to run the N1netails project."]}),"\n",(0,r.jsxs)(n.p,{children:["You will also need to set up a directory called ",(0,r.jsx)(n.code,{children:"initdb"})," and create a sql file with the following name ",(0,r.jsx)(n.code,{children:"init-ntail-schema.sql"})," so docker can generate the ",(0,r.jsx)(n.code,{children:"ntail"})," schema."]}),"\n",(0,r.jsx)(n.p,{children:"Your folder structure should look like this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pgsql",children:"your-directory/\r\n\u251c\u2500\u2500 docker-compose.yml\r\n\u2514\u2500\u2500 initdb/\r\n    \u2514\u2500\u2500 init-ntail-schema.sql\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f Note: You can also clone this github repository to get the ",(0,r.jsx)(n.code,{children:"docker-compose.yml"})," file and the ",(0,r.jsx)(n.code,{children:"initdb"})," directory that includes the ",(0,r.jsx)(n.code,{children:"init-ntail-schema.sql"})," file. ",(0,r.jsx)(n.a,{href:"https://github.com/n1netails/n1netails",children:"N1netails Project Github"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"init-ntail-schema.sql"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE SCHEMA IF NOT EXISTS ntail AUTHORIZATION n1netails;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"docker-compose.yml"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'services:\r\n  #  N1neTails API\r\n  api:\r\n    image: shahidfo/n1netails-api:latest\r\n    container_name: n1netails-api\r\n    ports:\r\n      - "9901:9901"\r\n    depends_on:\r\n      liquibase:\r\n        condition: service_completed_successfully\r\n      db:\r\n        condition: service_healthy\r\n    environment:\r\n      SPRING_PROFILE_ACTIVE: docker\r\n      SPRING_DATASOURCE_URL: jdbc:postgresql://db:5432/n1netails\r\n      SPRING_DATASOURCE_USERNAME: n1netails\r\n      SPRING_DATASOURCE_PASSWORD: n1netails\r\n      N1NETAILS_PASSKEY_RELYING_PARTY_ID: localhost\r\n      N1NETAILS_PASSKEY_ORIGINS: http://localhost:8080,http://localhost:9900,http://localhost:9901,http://localhost:4200\r\n  # N1neTails UI\r\n  ui:\r\n    image: shahidfo/n1netails-ui:latest\r\n    container_name: n1netails-ui\r\n    ports:\r\n      - "9900:9900"\r\n    depends_on:\r\n      - api\r\n    environment:\r\n      SPRING_PROFILE_ACTIVE: docker\r\n      # this can be changed to point to other n1netails-api urls\r\n      API_BASE_URL: http://localhost:9901\r\n  # N1neTails Liquibase\r\n  liquibase:\r\n    image: shahidfo/n1netails-liquibase:latest\r\n    container_name: n1netails-liquibase\r\n    depends_on:\r\n      db:\r\n        condition: service_healthy\r\n    environment:\r\n      SPRING_PROFILE_ACTIVE: docker\r\n      SPRING_DATASOURCE_URL: jdbc:postgresql://db:5432/n1netails\r\n      SPRING_DATASOURCE_USERNAME: n1netails\r\n      SPRING_DATASOURCE_PASSWORD: n1netails\r\n  # Postgres Database\r\n  db:\r\n    image: postgres:16-alpine\r\n    container_name: n1netails_db\r\n    environment:\r\n      POSTGRES_DB: n1netails\r\n      POSTGRES_USER: n1netails\r\n      POSTGRES_PASSWORD: n1netails\r\n    volumes:\r\n      - pgdata:/var/lib/postgresql/data\r\n      - ./initdb:/docker-entrypoint-initdb.d\r\n    ports:\r\n      - "5434:5432"\r\n    healthcheck:\r\n      test: [ "CMD-SHELL", "pg_isready -U n1netails" ]\r\n      interval: 10s\r\n      timeout: 5s\r\n      retries: 60\r\n\r\nvolumes:\r\n  pgdata:\r\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"useful-docker-commands",children:"Useful Docker Commands"}),"\n",(0,r.jsx)(n.p,{children:"Build and run the docker container with the following commands."}),"\n",(0,r.jsx)(n.h4,{id:"docker-compose",children:"docker compose"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"docker-compose up --build\n"})}),"\n",(0,r.jsx)(n.h4,{id:"remove-docker-containers",children:"Remove docker containers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose down -v \n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var s=t(6540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);